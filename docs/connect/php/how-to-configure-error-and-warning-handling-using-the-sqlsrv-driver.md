---
title: Configuración del control de errores y advertencias con el controlador SQLSRV
description: En este tema se describe cómo configurar el controlador SQLSRV para controlar errores y advertencias cuando se usa el controlador SQLSRV de Microsoft para PHP en SQL Server.
ms.custom: ''
ms.date: 08/10/2020
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- errors and warnings
ms.assetid: 257c6f53-9137-4619-a613-eee33d2077e8
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: aa96471a6702836b48e95e65fdb40bde30ecd14f
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/10/2021
ms.locfileid: "100042455"
---
# <a name="how-to-configure-error-and-warning-handling-using-the-sqlsrv-driver"></a>Procedimientos: Configuración del control de errores y advertencias con el controlador SQLSRV
[!INCLUDE[Driver_PHP_Download](../../includes/driver_php_download.md)]

En este tema se describe cómo configurar el controlador SQLSRV para controlar errores y advertencias.  
  
De forma predeterminada, el controlador SQLSRV trata las advertencias como errores; una llamada a una función de **sqlsrv** que genera un error o una advertencia devuelve el valor **False**. Para deshabilitar este comportamiento, utilice la función [sqlsrv_configure](../../connect/php/sqlsrv-configure.md). Cuando la siguiente línea de código se incluye al principio de un script, una función de **sqlsrv** que únicamente genera advertencias (no errores) no devolverá el valor **False**:  
  
`sqlsrv_configure("WarningsReturnAsErrors", 0);`  
  
La siguiente línea de código restablece el comportamiento predeterminado (las advertencias se tratan como errores):  
  
`sqlsrv_configure("WarningsReturnAsErrors", 1);`  
  
> [!NOTE]  
> Sin embargo, las advertencias que corresponden a los valores 01000, 01001, 01003 y 01S02 de SQLSTATE nunca se tratan como errores. Con independencia de la configuración, una función de **sqlsrv** que únicamente genera advertencias que corresponden a uno de estos estados no devolverá el valor **False**.  
  
El valor de **WarningsReturnAsErrors** también puede establecerse en el archivo php.ini. Por ejemplo, esta entrada de la sección de `[sqlsrv]` del archivo php.ini desactiva el comportamiento predeterminado.  
  
`sqlsrv.WarningsReturnAsErrors = 0`  
  
Para obtener información sobre cómo recuperar información de advertencias y errores, consulte [sqlsrv_errors](../../connect/php/sqlsrv-errors.md) y [Cómo controlar errores y advertencias](../../connect/php/how-to-handle-errors-and-warnings-using-the-sqlsrv-driver.md).  
  
## <a name="example"></a>Ejemplo  
En el siguiente ejemplo de código se muestra cómo deshabilitar el comportamiento de control de errores predeterminado. En el ejemplo se utiliza el comando PRINT de Transact-SQL para generar una advertencia. Para obtener más información sobre el comando PRINT, vea [PRINT (Transact-SQL)](../../t-sql/language-elements/print-transact-sql.md).  
  
En primer lugar, el ejemplo ilustra el comportamiento de control de errores predeterminado mediante la ejecución de una consulta que genera una advertencia. Esta advertencia se trata como un error. Después de cambiar la configuración de control de errores, se ejecuta la misma consulta. La advertencia no se trata como un error.  
  
En el ejemplo se da por hecho que SQL Server está instalado en el equipo local. Los resultados se agregan a la consola cuando se ejecuta el ejemplo en la línea de comandos.  
  
```  
<?php  
/* Connect to the local server using Windows Authentication. */  
$serverName = "(local)";  
$conn = sqlsrv_connect( $serverName );  
if( $conn === false )  
{  
     echo "Could not connect.\n";  
     die( print_r( sqlsrv_errors(), true));  
}  
  
/* The Transact-SQL PRINT statement can be used to return   
informational or warning messages*/  
$tsql = "PRINT 'The PRINT statement can be used ";  
$tsql .= "to return user-defined warnings.'";  
  
/* Execute the query and print any errors. */  
$stmt1 = sqlsrv_query( $conn, $tsql);  
if($stmt1 === false)  
{  
     echo "By default, warnings are treated as errors:\n";  
     /* Dump errors in the error collection. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
  
/* Disable warnings as errors behavior. */  
sqlsrv_configure("WarningsReturnAsErrors", 0);  
  
/* Execute the same query and print any errors. */  
$stmt2 = sqlsrv_query( $conn, $tsql);  
if($stmt2 === false)  
{  
     /* Dump errors in the error collection. */  
     /* Since the warning generated by the query is be treated as   
        an error, this block of code will not be executed. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
else  
{  
     echo "After calling ";  
     echo "sqlsrv_configure('WarningsReturnAsErrors', 0), ";  
     echo "warnings are not treated as errors.";  
}  
  
/*Close the connection. */  
sqlsrv_close($conn);  
?>  
```  
  
## <a name="see-also"></a>Consulte también  
[Actividad de registro](../../connect/php/logging-activity.md)

[Guía de programación para los controladores de Microsoft para PHP para SQL Server](../../connect/php/programming-guide-for-php-sql-driver.md)

[Referencia de API del controlador SQLSRV](../../connect/php/sqlsrv-driver-api-reference.md)  
  
